(this.webpackJsonprepository=this.webpackJsonprepository||[]).push([[0],{13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__NBhst",image:"ImageGalleryItem_image__3DEDS"}},14:function(e,t,a){e.exports={Button:"ButtonLoadMore_Button__2G7q8",ButtonPosition:"ButtonLoadMore_ButtonPosition__2uMuy"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1DgdF",Modal:"Modal_Modal__OIUyK"}},28:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1XXr1"}},35:function(e,t,a){},7:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__sJHIg",searchForm:"Searchbar_searchForm__1k_oB",button:"Searchbar_button__30XT2",buttonLabel:"Searchbar_buttonLabel__1tEng",input:"Searchbar_input__2LOOR"}},76:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),o=a.n(r),c=a(5),s=a.n(c),u=(a(35),a(4)),i=a(6),l=(a(17),a(7)),b=a.n(l);function m(e){var t=e.onSubmit,a=Object(r.useState)(""),o=Object(u.a)(a,2),c=o[0],s=o[1];return Object(n.jsx)("header",{className:b.a.searchbar,children:Object(n.jsxs)("form",{className:b.a.searchForm,onSubmit:function(e){e.preventDefault(),c.trim()?(t(c),s("")):i.b.error("Enter your request")},children:[Object(n.jsx)("button",{type:"submit",className:b.a.button,children:Object(n.jsx)("span",{className:b.a.buttonLabel,children:"Search"})}),Object(n.jsx)("input",{className:b.a.input,name:"request",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})}var j=a(16),d=a(12),g=a.n(d),O=a(26),f=a(10),p=a.n(f);p.a.defaults.baseURL="https://pixabay.com/api/",p.a.defaults.params={key:"18616543-61f088c3928fc4bac834774e6",image_type:"Photo",orientation:"horizontal",per_page:12};var h={getImages:function(){var e=Object(O.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(a),e.prev=2,e.next=5,p.a.get("?page=".concat(a,"&q=").concat(t));case 5:return n=e.sent,e.abrupt("return",n.data.hits);case 9:return e.prev=9,e.t0=e.catch(2),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()},x=(a(56),a(27)),_=a.n(x),v="idle",y="pending",I="resolved",N="rejected";function S(e){var t=e.request,a=e.page,o=(e.setNextPage,e.images,e.setImages),c=Object(r.useState)(null),s=Object(u.a)(c,2),l=s[0],b=s[1],m=Object(r.useState)(v),d=Object(u.a)(m,2),g=d[0],O=d[1];return Object(r.useEffect)((function(){t&&(O(y),h.getImages(t,a).then((function(e){if(o((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e))})),e)return O(I),void(a>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}));O(N)})).catch((function(e){return b(e)})))}),[t,a,o]),"idle"===g?null:"pending"===g?Object(n.jsx)("div",{className:"Loader",children:Object(n.jsx)(_.a,{margin:"0 auto",type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})}):"rejected"!==g?"resolved"===g?null:void 0:void i.b.error(l)}var w=a(28),P=a.n(w),B=a(13),L=a.n(B),E=function(e){var t=e.imageData,a=t.largeImageURL,r=t.tags;return Object(n.jsx)("li",{className:L.a.ImageGalleryItem,children:Object(n.jsx)("img",{src:a,alt:r,className:L.a.image})})},k=a(14),G=a.n(k),M=a(29),C=a.n(M),F=function(e){var t=e.setNextPage;return Object(n.jsx)("button",{type:"button",className:C()(G.a.Button,G.a.ButtonPosition),onClick:t,children:"Load more"})},q=function(e){var t=e.images,a=e.setNextPage;return Object(n.jsxs)("div",{children:[Object(n.jsx)("ul",{className:P.a.ImageGallery,children:t.map((function(e){return Object(n.jsx)(E,{imageData:e},e.id)}))}),Object(n.jsx)(F,{setNextPage:a})]})},D=a(15),T=a.n(D),J=document.getElementById("modal-root");function R(e){var t=e.onClose,a=e.image;function o(e){"Escape"===e.code&&t()}return Object(r.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}})),Object(c.createPortal)(Object(n.jsx)("div",{className:T.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(n.jsx)("div",{className:T.a.Modal,children:Object(n.jsx)("img",{src:a,alt:"modal image"})})}),J)}function U(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),l=s[0],b=s[1],j=Object(r.useState)(1),d=Object(u.a)(j,2),g=d[0],O=d[1],f=Object(r.useState)(!1),p=Object(u.a)(f,2),h=p[0],x=p[1],_=Object(r.useState)([]),v=Object(u.a)(_,2),y=v[0],I=v[1],N=function(){x((function(e){return!e}))},w=function(){console.log("setNExtPage worked"),O((function(e){return e+1}))};return Object(n.jsxs)("div",{onClick:function(e){"IMG"===e.target.nodeName&&(b(e.target.currentSrc),N())},className:"App",children:[h&&Object(n.jsx)(R,{image:l,onClose:N}),Object(n.jsx)(m,{onSubmit:function(e){I([]),O(1),o(e)}}),Object(n.jsx)(S,{request:a,page:g,setNextPage:w,resetPage:function(){O(1)},images:y,setImages:I}),y.length>0&&Object(n.jsx)(q,{images:y,setNextPage:w}),Object(n.jsx)(i.a,{autoClose:3e3})]})}s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.f72a593e.chunk.js.map